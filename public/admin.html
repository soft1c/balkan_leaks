<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BIPKD | Admin</title>
  <script src="https://cdn.ckeditor.com/ckeditor5/36.0.1/classic/ckeditor.js"></script>
  <link rel="stylesheet" href="css/admin.css">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <style>
    .layout-row {
  display: flex;
  justify-content: space-around;
  margin-bottom: 15px;
}

.layout-box {
  width: 100px; /* Adjust size as needed */
  height: 100px; /* Adjust size as needed */
  border: 1px solid #000;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.layout-box.large {
  width: 50%; /* Larger box for Person of the Month */
}
#personSelector div {
  cursor: pointer;
  padding: 5px;
  border-bottom: 1px solid #ddd;
}
#personSelector div:hover {
  background-color: #f0f0f0;
}
  </style>
</head>
<body>
  <div class="top-navigation">
    <nav class="navbar">
        <a href="#menu" class="mobile-only hot-dog nav-element">
        </a>
      <div class="nav-logo">
        
          <h1>Admin panel</h1>
        
      </div>
      <div class="action-buttons">
        <button id="odjava" class="button-face support-link" onclick="logout()">Log Out</button>
      </div>
      
      <div class="main-nav">
      </div>
    </nav>
  </div>
  <script src="js/admin.js"></script>
  <div class="sidebar">
    <a href="#" class="tablink" onclick="openTab(event, 'AddPerson')">Add Person</a>
    <a href="#" class="tablink" onclick="openTab(event, 'IPAddresses')">IP Addresses</a>
    <a href="#" class="tablink" onclick="openTab(event, 'ManageLayout')">Page Layout</a>
    <a href="#" class="tablink" onclick="openTab(event, 'EditPersons')">Edit Persons</a>
    <a id="ManagePersonel1" href="#" class="tablink" onclick="openTab(event, 'ManagePersonel')" >Manage Staff</a>
    <a href="#" class="tablink" onclick="openTab(event, 'ChangePassword')">Change Your Password</a>  
    <a href="#" class="tablink" onclick="openTab(event, 'AddNews')">Add a news</a>
    <a href="#" class="tablink" onclick="openTab(event, 'EditFooter')">Manage Footer</a>


  </div>
  <div id="AddPerson" class="tabcontent"> 
  <form id="AddPersonForm" action="/admin/dodaj" method="post" enctype="multipart/form-data">
    <h1>Add a Person</h1>
    <div class="form-row">
      <div class="form-group">
        <label for="ime">Name:</label>
        <input type="text" name="ime" required>
      </div>
      
      <div class="form-group">
        <label for="ime">Surname:</label>
        <input type="text" name="prezime" required>
      </div>
    </div>
    
  
    
    <div class="form-row">
      <div class="form-group image-upload-container">
        <div class="image-upload-box" onclick="document.getElementById('slika').click()">
          <p>Upload Picture</p>
          <input type="file" id="slika" name="slika" accept="image/*" required onchange="previewImage(event)">
          <img id="imagePreview" src="" alt="Image preview" style="display:none;">
        </div>
      </div>
      
      <div class="form-group text-editor-container">
        
        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
        <div id="editor">
        </div>

        <textarea name="opis1" id="hiddenOpis1" style="display:none;"></textarea>

<script>
  var toolbarOptions = [
  ['bold', 'italic', 'underline'],
  [{ 'list': 'ordered'}, { 'list': 'bullet' }],
  [{ 'size': ['small', false, 'large', 'huge'] }],

  ['link'],
  [{ 'color': [] }, { 'background': [] }],
  [{ 'font': [] }],
  [{ 'align': [] }]
];

var Link = Quill.import('formats/link');

class MyLink extends Link {
  static create(value) {
    let node = super.create(value);
    // Dodaje 'http://' ako link ne poƒçinje sa 'http://' ili 'https://'
    if (!value.startsWith('http://') && !value.startsWith('https://')) {
      node.setAttribute('href', 'http://' + value);
    }
    return node;
  }
}

Quill.register(MyLink);

var quill = new Quill('#editor', {
  modules: {
    toolbar: toolbarOptions
  },
  theme: 'snow'
});

</script>
      </div>
    </div>
    
    
    <div class="form-row button-container">
      <button type="submit" class="submit-button">Add Person</button>
    </div>
  </form>

  
  </div>

  
  <div id="IPAddresses" class="tabcontent">
    <div class="data-container">
      <div id="ip-addresses" class="data-block">
          <h2>IP Addresses:</h2>
          <ul id="ipList" class="scrollable-list"></ul>
      </div>
  
      <div id="visit-stats" class="data-block">
          <h2>Visit Statistics:</h2>
          <p id="dailyCount">Today's Visits: Loading...</p>
          <p id="weeklyCount">Last Week's Visits: Loading...</p>
          <p id="allTimeCount">Total Visits: Loading...</p>
      </div>
  </div>
  </div>
  


  <div id="ManageLayout" class="tabcontent">
    <h2>Manage Layout</h2>
    <div class="layout-row">
      <div id ="personOfTheMonth" class="layout-box large" onclick="openPersonSelector('personOfTheMonth',this)">
        Person of the Month
      </div>
    </div>
    <div class="layout-row">
      <!-- Featured Persons -->
      <div id="featuredPerson1" class="layout-box" onclick="openPersonSelector('featuredPerson1',this)">Featured 1</div>
      <div id="featuredPerson2" class="layout-box" onclick="openPersonSelector('featuredPerson2',this)">Featured 2</div>
      <div id="featuredPerson3" class="layout-box" onclick="openPersonSelector('featuredPerson3',this)">Featured 3</div>
      <div id="featuredPerson4" class="layout-box" onclick="openPersonSelector('featuredPerson4',this)">Featured 4</div>
    </div>
  
    <!-- Submit Button -->
    <button type="button" class="submit-button" style="margin: 0 auto;"onclick="submitLayoutChanges()">Submit Layout</button>
  </div>


<div id="EditPersons" class="tabcontent">
  
  <h2>Edit Persons</h2>
  <!-- Dropdown for selecting a person -->
  <select style ="width:30%; height: 30px" id="personSelect" onchange="populateEditForm()">
    <option value="">Select a Person...</option>
    <!-- Options will be dynamically populated here -->
  </select>
  

  
  <form id="editPersonForm" style="display:none;">
    <h1>Edit Person Details</h1>
    
    
    <div class="form-row">
      <div class="form-group">
        <label for="ime">Name:</label>
        <input type="text" id="imeEdit" name="ime" required>
      </div>
      
      <div class="form-group">
        <label for="ime">Surname:</label>
        <input type="text" id="prezimeEdit" name="prezime" required>
      </div>
    </div>
    

    
    <div class="form-row">
      <div class="form-group image-upload-container">
        <div class="image-upload-box" onclick="document.getElementById('slikaEdit').click()">
          <p>Upload Picture</p>
          <input type="file" id="slikaEdit" name="slika" accept="image/*" required onchange="previewImage(event)">
          <img id="slikaId" src="" alt="Image preview" style="display:none;">
        </div>
      </div>
      
      <div class="form-group text-editor-container">
        
        <div id="opisEdit" class="text-editor-container"></div>
        
      </div>
    </div>
    <textarea name="opis" id="hiddenOpis" style="display:none;"></textarea>

    <div class="form-group">
      <label for="file">Upload Media:</label>
      <input type="file" id="file" name="file" style="display: block;"required>
      <select name="type" required>
        <option value="image">Picture</option>
        <option value="video">Video</option>
        <option value="audio">Audio</option>
        <option value="text">Text</option>
      </select>
    </div>
    
    <div class="form-row button-container">
      <button type="button" onclick="submitEditForm()" class="submit-button">Update Person</button>
      <button type="button" onclick="deletePerson()" class="submit-button delete-button">Delete Person</button>
    </div>
    
  </form>
  
</div>



<div id="ManagePersonel" class="tabcontent">
  <h1>Add a Moderator</h1>
  <form id="addModeratorForm">
    <div class="form-row">
      <div class="form-group">
        <label for="modUsername">Username:</label>
        <input type="text" id="modUsername" name="username" required>
      </div>
      
      <div class="form-group">
        <label for="modPassword">Password:</label>
        <input type="password" id="modPassword" name="password" required>
      </div>
    </div>

    <div class="form-row button-container">
      <button type="button" onclick="addModerator()" class="submit-button">Add Moderator</button>
    </div>
  </form>


  <h1>Delete a Moderator</h1>
  <form id="deleteModeratorForm">
    <div class="form-row">
      <div class="form-group">
        <label for="moderatorSelect">Select Moderator:</label>
        <select id="moderatorSelect" required></select>
      </div>
    </div>
    <div class="form-row button-container">
      <button type="button" onclick="deleteModerator()" class="submit-button">Delete Moderator</button>
    </div>
  </form>
  <h1>Add an Admin</h1>
  <form id="addAdminForm">
    <div class="form-row">
      <div class="form-group">
        <label for="adminUsername">Username:</label>
        <input type="text" id="adminUsername" name="username" required>
      </div>
      
      <div class="form-group">
        <label for="adminPassword">Password:</label>
        <input type="password" id="adminPassword" name="password" required>
      </div>
    </div>

    <div class="form-row button-container">
      <button type="button" onclick="addAdmin()" class="submit-button">Add Admin</button>
    </div>
  </form>

  <h1>Delete an Admin</h1>
  <form id="deleteAdminForm">
    <div class="form-row">
      <div class="form-group">
        <label for="adminSelect">Select Admin:</label>
        <select id="adminSelect" required></select>
      </div>
    </div>
    <div class="form-row button-container">
      <button type="button" onclick="deleteAdmin()" class="submit-button">Delete Admin</button>
    </div>
  </form>

</div>

<div id="ChangePassword" class="tabcontent">
  <h1>Change your password</h1>
  <form id="changePasswordForm">
    <div class="form-row">
      <div class="form-group">
        <label for="currentPassword">Current password: </label>
        <input type="password" id="currentPassword" name="currentPassword" required>
      </div>
      
      <div class="form-group">
        <label for="newPassword">New password: </label>
        <input type="password" id="newPassword" name="newPassword" required>
      </div>

      <div class="form-group">
        <label for="confirmNewPassword">Confirm new password: </label>
        <input type="password" id="confirmNewPassword" name="confirmNewPassword" required>
      </div>
    </div>

    <div class="form-row button-container">
      <button type="button" onclick="changePassword()" class="submit-button">Change password</button>
    </div>
  </form>
</div>

<div id="AddNews" class="tabcontent">
  <h1>Add News Article</h1>
  <form id="addNewsForm">
    <div class="form-group">
      <label for="newsTitle">Title:</label>
      <input type="text" id="newsTitle" name="title" required>
    </div>
    <div class="form-group text-editor-container">
      <div id="newsEditor"></div>
      <textarea name="content" id="hiddenContent" style="display:none;"></textarea>
    </div>
    <div class="form-row button-container">
      <button type="button" onclick="submitNews()" class="submit-button">Publish News</button>
    </div>
  </form>
</div>

<div id="EditFooter" class="tabcontent">
  <h1>Edit Footer</h1>
  <div id="footerElements">
      <div class="footer-element">
          <form class="editFooterForm" id="editFooterForm1" data-footer-id="1">
            <input type="hidden" name="footerId" value="1">

              <label>Image:</label>
              <input style="display:block;" type="file" name="footerImage" accept="image/*">
              <img class="current-footer-image" src="" alt="Current Footer Image" style="max-width: 200px; max-height: 150px;">
              <label>Text:</label>
              <textarea name="footerText"></textarea>
              <button type="button" onclick="submitFooterEdit(1)">Update Element</button>
          </form>
      </div>
  </div>
  <div id="footerElements">
    <div class="footer-element">
        <form class="editFooterForm" id="editFooterForm2" data-footer-id="2">
          <input type="hidden" name="footerId" value="2">

            <label>Image:</label>
            <input style="display:block;" type="file" name="footerImage" accept="image/*">
            <img class="current-footer-image" src="" alt="Current Footer Image" style="max-width: 200px; max-height: 150px;">
            <label>Text:</label>
            <textarea name="footerText"></textarea>
            <button type="button" onclick="submitFooterEdit(2)"">Update Element</button>
        </form>
    </div>
</div>
<div id="footerElements">
  <div class="footer-element">
      <form class="editFooterForm" id="editFooterForm3" data-footer-id="3">
        <input type="hidden" name="footerId" value="3">

          <label>Image:</label>
          <input style="display:block;" type="file" name="footerImage" accept="image/*">
          <img class="current-footer-image" src="" alt="Current Footer Image" style="max-width: 200px; max-height: 150px;">
          <label>Text:</label>
          <textarea name="footerText"></textarea>
          <button type="button" onclick="submitFooterEdit(3)">Update Element</button>
      </form>
  </div>
</div>
<div id="footerElements">
  <div class="footer-element">
      <form class="editFooterForm" id="editFooterForm4"  data-footer-id="4">
        <input type="hidden" name="footerId" value="4">

          <label>Image:</label>
          <input style="display:block;" type="file" name="footerImage" accept="image/*">
          <img class="current-footer-image" src="" alt="Current Footer Image" style="max-width: 200px; max-height: 150px;">
          <label>Text:</label>
          <textarea name="footerText"></textarea>
          <button type="button" onclick="submitFooterEdit(4)">Update Element</button>
      </form>
  </div>
</div>
</div>





<script src="js/admin.js"></script>
<script>
    var quillNews = new Quill('#newsEditor', {
    modules: {
      toolbar: toolbarOptions
    },
    theme: 'snow'
  });
</script>


<script src="js/admin.js"></script>
</body>
</html>
